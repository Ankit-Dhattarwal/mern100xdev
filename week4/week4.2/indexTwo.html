<html>
  
  <div>
    <input id="title" type="text" placeholder="title"></input> <br></br>
    <input id="description" type="text" placeholder="description"></input> <br></br>

    <div id="container"></div>

    <script>

      function createChild(title, description , id){
        const child = document.createElement("div");
        const firstGrandChild = document.createElement("div");
        firstGrandChild.innerHTML = title;
        const secondGrandChild = document.createElement("div");
        secondGrandChild.innerHTML = description;
        const thirdGrandChild = document.createElement("button");
        thirdGrandChild.innerHTML = "Mark as done";
        thirdGrandChild.setAttribute("onclick", `markAsDone(${id})`);
        child.append(firstGrandChild);
        child.append(secondGrandChild);
        child.append(thirdGrandChild);
        child.setAttribute("id", id);
        return child;
  
      }
  
      // State will always be an array 
      // Every element of state would have title , description and id
      //
      //
      //
  
  
      function updateDomAccToState(state){
        const parent = document.getElementById("container");
        parent.innerHTML = "";
        for(let i = 0; i< state.length; i++){
          const child = createChild(state[i].title, state[i].description, state[i].id);
          parent.appendChild(child);
        }
      }

      window.setInterval( async function(){
        const res = await fetch("https://sum-server.100xdevs.com/todos");
        const json = await res.json();
        updateDomAccToState(json.todos);
            }, 5000)


      // updateDomAccToState([{
      //   title: 'go to college',
      //   description: 'go to college form 9-6'
      // }])
    </script>
  </div>
</html>;
